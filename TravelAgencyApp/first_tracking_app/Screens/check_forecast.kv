#: import Airport database.Airport
#: import Forcast database.City
Screen:
    name: 'check_forecast'
    on_enter:
        app.create_popup(app.populate_spinner(app.session, Airport, airport_spinner))
    on_leave:
        forecast.text = ''
        date_spinner.text = ''
        date_spinner.disabled = True
    Header:
        title: 'Check Forecast'
        BoxLayout:
            orientation: 'vertical'
            Widget:
            GridLayout:
                cols: 2
                rows: 4
                row_force_default: True
                row_default_height: 40
                Label:
                    text: 'Airport: '
                    font_size: sp(15)
                    color: (0, 0, 0, 1)
                Spinner:
                    id:   airport_spinner
                    text: "Select"
                    background_color: 0.5, 0.7, 1, 1
                    pos_hint:{'center_x':1, 'top': 1}
                    on_text: app.create_popup(app.airport_selected(app.session, airport_spinner.text, date_spinner))
                Label:
                    text: 'Date: '
                    font_size: sp(15)
                    color: (0, 0, 0, 1)
                Spinner:
                    id:   date_spinner
                    text: "Select"
                    disabled: True
                    background_color: 0.5, 0.7, 1, 1
                    pos_hint:{'center_x':1, 'top': 1}
            Widget:
            Label:
                id: forecast
                text_size: self.size
                halign: 'center'
                valign: 'center'

            Button:
                id: check_forecast
                size_hint_y:.25
                text: 'Check'
                on_press:
                    app.create_popup(app.check_forecast_clicked(app.session,date_spinner.text, airport_spinner.text, forecast))

